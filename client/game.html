<!DOCTYPE html>
<html lang="vi">
<head>
    <link rel="icon" href="assets/images/WhiteKing.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Legend - Tr·∫≠n ƒë·∫•u</title>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/game.css">
    
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
</head>
<body>

    <div class="main-layout">
        
        <div class="board-section">
            <div class="player-info opponent">
                <img src="assets/images/BlackKing.png" class="avatar" alt="Opponent">
                <div class="details">
                    <span class="name" id="opponent-name">ƒêang t√¨m ƒë·ªëi th·ªß...</span>
                    <span class="elo" id="opponent-elo">ELO: ???</span>
                </div>
                <div class="timer" id="opponent-timer">10:00</div>
            </div>

            <div class="board-wrapper">
                <img src="assets/images/Board.png" class="board-bg" alt="Board">
                <div id="chess-board" class="chess-grid"></div>
            </div>

            <div class="player-info me">
                <img src="assets/images/WhiteKing.png" class="avatar" id="my-avatar" alt="Me">
                <div class="details">
                    <span class="name" id="my-name">...</span>
                    <span class="elo" id="my-elo">ELO: ...</span>
                </div>
                <div class="timer" id="my-timer">10:00</div>
            </div>
        </div>

        <div class="sidebar">
            <h2 class="sidebar-title" id="room-id-display">PH√íNG: ---</h2>
            
            <div class="move-history" id="move-history">
                <div style="text-align: center; color: #777; padding-top: 10px; font-size: 12px;">Tr·∫≠n ƒë·∫•u b·∫Øt ƒë·∫ßu</div>
            </div>

            <div class="action-buttons">
                <button class="btn-game btn-draw">Xin h√≤a ü§ù</button>
                <button class="btn-game btn-resign">ƒê·∫ßu h√†ng üè≥Ô∏è</button>
                <button class="btn-game btn-quit" onclick="location.href='dashboard.html'">Tho√°t tr·∫≠n</button>
            </div>

            <div class="chat-container">
                <h3 class="chat-title">TR√í CHUY·ªÜN</h3>
                <div id="chat-box" class="chat-box">
                    <div class="chat-message system">Ch√∫c b·∫°n ch∆°i game vui v·∫ª!</div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Chat..." onkeypress="handleChatKey(event)">
                    <button onclick="sendChat()" class="btn-send">‚û§</button>
                </div>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title" style="color: #fbc02d;">X√ÅC NH·∫¨N</h2>
            <p class="modal-message" id="confirm-message">B·∫°n c√≥ ch·∫Øc ch·∫Øn kh√¥ng?</p>
            <div class="modal-buttons">
                <button id="btn-confirm-yes" class="btn-game btn-resign">ƒê·ªíNG √ù</button>
                <button onclick="document.getElementById('confirm-modal').style.display='none'" class="btn-game btn-quit" style="background: #a1887f;">H·ª¶Y B·ªé</button>
            </div>
        </div>
    </div>

    <div id="game-over-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title" id="modal-title">K·∫æT TH√öC</h2>
            <p class="modal-message" id="modal-message">...</p>
            <div class="modal-buttons">
                <button class="btn-game btn-quit" onclick="location.href='dashboard.html'">V·ªÅ S·∫£nh</button>
                <button class="btn-game btn-draw" onclick="location.reload()">Ch∆°i L·∫°i</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/game.js"></script>
</body>
</html>